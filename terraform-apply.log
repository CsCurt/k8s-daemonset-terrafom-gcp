[0m[1mgoogle_compute_network.vpc_network: Refreshing state... [id=projects/curt-demo-project/global/networks/my-vpc-network][0m
[0m[1mgoogle_compute_subnetwork.subnetwork: Refreshing state... [id=projects/curt-demo-project/regions/us-central1/subnetworks/test-subnetwork][0m
[0m[1mgoogle_compute_firewall.allow-internal: Refreshing state... [id=projects/curt-demo-project/global/firewalls/allow-internal][0m
[0m[1mgoogle_compute_firewall.allow-ssh: Refreshing state... [id=projects/curt-demo-project/global/firewalls/allow-ssh][0m
[0m[1mgoogle_compute_instance.ubuntu_server: Refreshing state... [id=projects/curt-demo-project/zones/us-central1-a/instances/ubuntu-microk8s-server][0m

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  [32m+[0m create[0m
[31m-[0m/[32m+[0m destroy and then create replacement[0m

Terraform will perform the following actions:

[1m  # google_compute_instance.kali_attacker[0m will be created
[0m  [32m+[0m[0m resource "google_compute_instance" "kali_attacker" {
      [32m+[0m[0m can_ip_forward          = false
      [32m+[0m[0m cpu_platform            = (known after apply)
      [32m+[0m[0m current_status          = (known after apply)
      [32m+[0m[0m deletion_protection     = false
      [32m+[0m[0m guest_accelerator       = (known after apply)
      [32m+[0m[0m id                      = (known after apply)
      [32m+[0m[0m instance_id             = (known after apply)
      [32m+[0m[0m label_fingerprint       = (known after apply)
      [32m+[0m[0m machine_type            = "e2-medium"
      [32m+[0m[0m metadata                = {
          [32m+[0m[0m "ssh-keys" = <<-EOT
                ubuntu:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDgs5VauqCVvcLJ9KCLK3S+clXGvu9hOKTHCzuUejGLV4Xk3onwj5OeJp1HX5VmLZnLGsKof9cer7mCkviE1D2fU1WA7fWp+ZgPw01BCWe3V7FuzVGThUXrWwETPiW5wv8x0GeljshAp8kz83S970ldoWY568rWB4upblpHXSSjePMw0bCNf3fYUi4agNMRbAOTUEW09gxJ7ZtgrxihWeHs4o1rt+qsLJozvS//zLdM3DuCUOqgnD+Nu+XVyYzzbIKRxWrthngdygicEHKcbCQCQTHD8wVP0jS4/MiuIc9J7vevq+LYQnbg5TrWBl0bFpogGSpKPWYVUdb6+gnQ6WNapI3PKsWEq9s3hFzODLYY/+7I/JD8DX3PYtIPebXOFgXOY/0TRtUl5u9wWZDBEh4818unlmJQKUp+jNMCrx8ixvLK2qfWylAjmcbK4YA/TsmtTLHP0MB24OpDgdtNxeoWnBDmYL0Mixz2qeNK8xBMTiwjh0sspDZ1SAtjqFWJFVJoiy0vQr74cM8OsJqvgI66POT/qVegskkcaYRW4knulOKUPcrobOETZpNzWzii3d6kbJvmXOQ+aB2D7fog/5iIrNqMLcfazf01sILVEjzPaTejclhpi6tetah5jxNxHM83VA392CEOcp//z1kbNh/DqzD0DsOJFWR6Rx5+c1JHHw== cpocock@crowdstrike-gcp-lab.io
            EOT
        }
      [32m+[0m[0m metadata_fingerprint    = (known after apply)
      [32m+[0m[0m metadata_startup_script = <<-EOT
            #!/bin/bash
            sudo apt update -y
            sudo apt upgrade -y
            sudo apt install -y openssh-server
            sudo systemctl enable ssh
            sudo systemctl start ssh
        EOT
      [32m+[0m[0m min_cpu_platform        = (known after apply)
      [32m+[0m[0m name                    = "kali-desktop-linux-vm"
      [32m+[0m[0m project                 = (known after apply)
      [32m+[0m[0m self_link               = (known after apply)
      [32m+[0m[0m tags                    = [
          [32m+[0m[0m "http-server",
          [32m+[0m[0m "rdp-server",
        ]
      [32m+[0m[0m tags_fingerprint        = (known after apply)
      [32m+[0m[0m zone                    = "us-central1-a"

      [32m+[0m[0m boot_disk {
          [32m+[0m[0m auto_delete                = true
          [32m+[0m[0m device_name                = (known after apply)
          [32m+[0m[0m disk_encryption_key_sha256 = (known after apply)
          [32m+[0m[0m kms_key_self_link          = (known after apply)
          [32m+[0m[0m mode                       = "READ_WRITE"
          [32m+[0m[0m source                     = (known after apply)

          [32m+[0m[0m initialize_params {
              [32m+[0m[0m image  = "kali-custom-image"
              [32m+[0m[0m labels = (known after apply)
              [32m+[0m[0m size   = 60
              [32m+[0m[0m type   = "pd-standard"
            }
        }

      [32m+[0m[0m confidential_instance_config (known after apply)

      [32m+[0m[0m network_interface {
          [32m+[0m[0m internal_ipv6_prefix_length = (known after apply)
          [32m+[0m[0m ipv6_access_type            = (known after apply)
          [32m+[0m[0m ipv6_address                = (known after apply)
          [32m+[0m[0m name                        = (known after apply)
          [32m+[0m[0m network                     = "projects/curt-demo-project/global/networks/my-vpc-network"
          [32m+[0m[0m network_ip                  = (known after apply)
          [32m+[0m[0m stack_type                  = (known after apply)
          [32m+[0m[0m subnetwork                  = "projects/curt-demo-project/regions/us-central1/subnetworks/test-subnetwork"
          [32m+[0m[0m subnetwork_project          = (known after apply)

          [32m+[0m[0m access_config {
              [32m+[0m[0m nat_ip       = (known after apply)
              [32m+[0m[0m network_tier = (known after apply)
            }
        }

      [32m+[0m[0m reservation_affinity (known after apply)

      [32m+[0m[0m scheduling (known after apply)

      [32m+[0m[0m service_account {
          [32m+[0m[0m email  = "cs-service-acct@curt-demo-project.iam.gserviceaccount.com"
          [32m+[0m[0m scopes = [
              [32m+[0m[0m "https://www.googleapis.com/auth/cloud-platform",
            ]
        }
    }

[1m  # google_compute_instance.ubuntu_server[0m is tainted, so must be [1m[31mreplaced[0m
[0m[31m-[0m/[32m+[0m[0m resource "google_compute_instance" "ubuntu_server" {
      [33m~[0m[0m cpu_platform            = "Intel Broadwell" -> (known after apply)
      [33m~[0m[0m current_status          = "STOPPING" -> (known after apply)
      [31m-[0m[0m enable_display          = false [90m-> null[0m[0m
      [33m~[0m[0m guest_accelerator       = [] -> (known after apply)
      [33m~[0m[0m id                      = "projects/curt-demo-project/zones/us-central1-a/instances/ubuntu-microk8s-server" -> (known after apply)
      [33m~[0m[0m instance_id             = "3825106651522851270" -> (known after apply)
      [33m~[0m[0m label_fingerprint       = "42WmSpB8rSM=" -> (known after apply)
      [31m-[0m[0m labels                  = {} [90m-> null[0m[0m
      [33m~[0m[0m metadata_fingerprint    = "zZj7CTBvIYA=" -> (known after apply)
      [32m+[0m[0m min_cpu_platform        = (known after apply)
        name                    = "ubuntu-microk8s-server"
      [33m~[0m[0m project                 = "curt-demo-project" -> (known after apply)
      [31m-[0m[0m resource_policies       = [] [90m-> null[0m[0m
      [33m~[0m[0m self_link               = "https://www.googleapis.com/compute/v1/projects/curt-demo-project/zones/us-central1-a/instances/ubuntu-microk8s-server" -> (known after apply)
        tags                    = [
            "http-server",
        ]
      [33m~[0m[0m tags_fingerprint        = "FYLDgkTKlA4=" -> (known after apply)
        [90m# (8 unchanged attributes hidden)[0m[0m

      [33m~[0m[0m boot_disk {
          [33m~[0m[0m device_name                = "persistent-disk-0" -> (known after apply)
          [32m+[0m[0m disk_encryption_key_sha256 = (known after apply)
          [32m+[0m[0m kms_key_self_link          = (known after apply)
          [33m~[0m[0m source                     = "https://www.googleapis.com/compute/v1/projects/curt-demo-project/zones/us-central1-a/disks/ubuntu-microk8s-server" -> (known after apply)
            [90m# (3 unchanged attributes hidden)[0m[0m

          [33m~[0m[0m initialize_params {
              [33m~[0m[0m image                 = "https://www.googleapis.com/compute/v1/projects/ubuntu-os-cloud/global/images/ubuntu-2004-focal-v20240731" [33m->[0m[0m "ubuntu-os-cloud/ubuntu-2004-lts"
              [33m~[0m[0m labels                = {} -> (known after apply)
              [31m-[0m[0m resource_manager_tags = {} [90m-> null[0m[0m
              [33m~[0m[0m size                  = 10 -> (known after apply)
              [33m~[0m[0m type                  = "pd-standard" -> (known after apply)
            }
        }

      [33m~[0m[0m confidential_instance_config {
          [32m+[0m[0m allow_stopping_for_update = (known after apply)
          [32m+[0m[0m can_ip_forward            = (known after apply)
          [32m+[0m[0m cpu_platform              = (known after apply)
          [32m+[0m[0m current_status            = (known after apply)
          [32m+[0m[0m deletion_protection       = (known after apply)
          [32m+[0m[0m description               = (known after apply)
          [32m+[0m[0m desired_status            = (known after apply)
          [32m+[0m[0m enable_display            = (known after apply)
          [32m+[0m[0m guest_accelerator         = (known after apply)
          [32m+[0m[0m hostname                  = (known after apply)
          [32m+[0m[0m id                        = (known after apply)
          [32m+[0m[0m instance_id               = (known after apply)
          [32m+[0m[0m label_fingerprint         = (known after apply)
          [32m+[0m[0m labels                    = (known after apply)
          [32m+[0m[0m machine_type              = (known after apply)
          [32m+[0m[0m metadata                  = (known after apply)
          [32m+[0m[0m metadata_fingerprint      = (known after apply)
          [32m+[0m[0m metadata_startup_script   = (known after apply)
          [32m+[0m[0m min_cpu_platform          = (known after apply)
          [32m+[0m[0m name                      = (known after apply)
          [32m+[0m[0m project                   = (known after apply)
          [32m+[0m[0m resource_policies         = (known after apply)
          [32m+[0m[0m self_link                 = (known after apply)
          [32m+[0m[0m tags                      = (known after apply)
          [32m+[0m[0m tags_fingerprint          = (known after apply)
          [32m+[0m[0m zone                      = (known after apply)
        } -> (known after apply)

      [33m~[0m[0m network_interface {
          [33m~[0m[0m internal_ipv6_prefix_length = 0 -> (known after apply)
          [32m+[0m[0m ipv6_access_type            = (known after apply)
          [32m+[0m[0m ipv6_address                = (known after apply)
          [33m~[0m[0m name                        = "nic0" -> (known after apply)
          [33m~[0m[0m network                     = "https://www.googleapis.com/compute/v1/projects/curt-demo-project/global/networks/my-vpc-network" [33m->[0m[0m "projects/curt-demo-project/global/networks/my-vpc-network"
          [33m~[0m[0m network_ip                  = "10.0.0.2" -> (known after apply)
          [31m-[0m[0m queue_count                 = 0 [90m-> null[0m[0m
          [33m~[0m[0m stack_type                  = "IPV4_ONLY" -> (known after apply)
          [33m~[0m[0m subnetwork                  = "https://www.googleapis.com/compute/v1/projects/curt-demo-project/regions/us-central1/subnetworks/test-subnetwork" [33m->[0m[0m "projects/curt-demo-project/regions/us-central1/subnetworks/test-subnetwork"
          [33m~[0m[0m subnetwork_project          = "curt-demo-project" -> (known after apply)
            [90m# (1 unchanged attribute hidden)[0m[0m

          [33m~[0m[0m access_config {
              [33m~[0m[0m nat_ip                 = "35.226.95.215" -> (known after apply)
              [33m~[0m[0m network_tier           = "PREMIUM" -> (known after apply)
                [90m# (1 unchanged attribute hidden)[0m[0m
            }
        }

      [33m~[0m[0m reservation_affinity {
          [32m+[0m[0m allow_stopping_for_update = (known after apply)
          [32m+[0m[0m can_ip_forward            = (known after apply)
          [32m+[0m[0m cpu_platform              = (known after apply)
          [32m+[0m[0m current_status            = (known after apply)
          [32m+[0m[0m deletion_protection       = (known after apply)
          [32m+[0m[0m description               = (known after apply)
          [32m+[0m[0m desired_status            = (known after apply)
          [32m+[0m[0m enable_display            = (known after apply)
          [32m+[0m[0m guest_accelerator         = (known after apply)
          [32m+[0m[0m hostname                  = (known after apply)
          [32m+[0m[0m id                        = (known after apply)
          [32m+[0m[0m instance_id               = (known after apply)
          [32m+[0m[0m label_fingerprint         = (known after apply)
          [32m+[0m[0m labels                    = (known after apply)
          [32m+[0m[0m machine_type              = (known after apply)
          [32m+[0m[0m metadata                  = (known after apply)
          [32m+[0m[0m metadata_fingerprint      = (known after apply)
          [32m+[0m[0m metadata_startup_script   = (known after apply)
          [32m+[0m[0m min_cpu_platform          = (known after apply)
          [32m+[0m[0m name                      = (known after apply)
          [32m+[0m[0m project                   = (known after apply)
          [32m+[0m[0m resource_policies         = (known after apply)
          [32m+[0m[0m self_link                 = (known after apply)
          [32m+[0m[0m tags                      = (known after apply)
          [32m+[0m[0m tags_fingerprint          = (known after apply)
          [32m+[0m[0m zone                      = (known after apply)
        } -> (known after apply)

      [33m~[0m[0m scheduling {
          [32m+[0m[0m allow_stopping_for_update = (known after apply)
          [32m+[0m[0m can_ip_forward            = (known after apply)
          [32m+[0m[0m cpu_platform              = (known after apply)
          [32m+[0m[0m current_status            = (known after apply)
          [32m+[0m[0m deletion_protection       = (known after apply)
          [32m+[0m[0m description               = (known after apply)
          [32m+[0m[0m desired_status            = (known after apply)
          [32m+[0m[0m enable_display            = (known after apply)
          [32m+[0m[0m guest_accelerator         = (known after apply)
          [32m+[0m[0m hostname                  = (known after apply)
          [32m+[0m[0m id                        = (known after apply)
          [32m+[0m[0m instance_id               = (known after apply)
          [32m+[0m[0m label_fingerprint         = (known after apply)
          [32m+[0m[0m labels                    = (known after apply)
          [32m+[0m[0m machine_type              = (known after apply)
          [32m+[0m[0m metadata                  = (known after apply)
          [32m+[0m[0m metadata_fingerprint      = (known after apply)
          [32m+[0m[0m metadata_startup_script   = (known after apply)
          [32m+[0m[0m min_cpu_platform          = (known after apply)
          [32m+[0m[0m name                      = (known after apply)
          [32m+[0m[0m project                   = (known after apply)
          [32m+[0m[0m resource_policies         = (known after apply)
          [32m+[0m[0m self_link                 = (known after apply)
          [32m+[0m[0m tags                      = (known after apply)
          [32m+[0m[0m tags_fingerprint          = (known after apply)
          [32m+[0m[0m zone                      = (known after apply)
        } -> (known after apply)

      [31m-[0m[0m shielded_instance_config {
          [31m-[0m[0m enable_integrity_monitoring = true [90m-> null[0m[0m
          [31m-[0m[0m enable_secure_boot          = false [90m-> null[0m[0m
          [31m-[0m[0m enable_vtpm                 = true [90m-> null[0m[0m
        }
    }

[1mPlan:[0m 2 to add, 0 to change, 1 to destroy.
[0m
Changes to Outputs:
  [32m+[0m[0m kali_attacker_ip = (known after apply)
  [32m+[0m[0m ubuntu_server_ip = (known after apply)
[0m[1m
Do you want to perform these actions?[0m
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  [1mEnter a value:[0m [0m
[0m[1mgoogle_compute_instance.ubuntu_server: Destroying... [id=projects/curt-demo-project/zones/us-central1-a/instances/ubuntu-microk8s-server][0m[0m
[0m[1mgoogle_compute_instance.kali_attacker: Creating...[0m[0m
[0m[1mgoogle_compute_instance.ubuntu_server: Still destroying... [id=projects/curt-demo-project/zones/us-central1-a/instances/ubuntu-microk8s-server, 10s elapsed][0m[0m
[0m[1mgoogle_compute_instance.ubuntu_server: Destruction complete after 11s[0m
[0m[1mgoogle_compute_instance.ubuntu_server: Creating...[0m[0m
[0m[1mgoogle_compute_instance.ubuntu_server: Still creating... [10s elapsed][0m[0m
[0m[1mgoogle_compute_instance.ubuntu_server: Provisioning with 'file'...[0m[0m
